ASR560X 系列开发板用户指南
==========================

前言
----

**关于本文档**

本文档旨在介绍 ASR560X QFN32 和 QFN48 开发板的硬件功能以及如何使用开发板来烧录和运行固件。

**读者对象**

本文档主要适用于以下工程师：

-  单板硬件开发工程师
-  软件工程师
-  技术支持工程师

**产品型号**

本文档适用于ASR560X系列蓝牙芯片。

+---------+-------------------------------------------------------------------------------------------+----------+--------------+------------------------------------------------------------------------------------+
| Model   | Protocol                                                                                  | Core     | SiP Flash    | Function                                                                           |
+=========+===========================================================================================+==========+==============+====================================================================================+
| ASR560X | BLE 5.1 full feature (compatible with 5.2) SIG MESH V1.0.x IEEE 802.15.4 2.4G Proprietary | ARM CM0+ | 1 MB/ 512 KB | AOA/AOD/Voice/IRTxRx/ Quadrature Decoder/Keypad/ 5V UART/5V GPIO/ Wi-Fi concurrent |
+---------+-------------------------------------------------------------------------------------------+----------+--------------+------------------------------------------------------------------------------------+

**版权公告**

版权归 © 2022 翱捷科技股份有限公司所有。保留一切权利。未经翱捷科技股份有限公司的书面许可，不得以任何形式或手段复制、传播、转录、存储或翻译本文档的部分或所有内容。

**商标声明**

ASR、翱捷和其他翱捷商标均为翱捷科技股份有限公司的商标。

本文档提及的其他所有商标名称、商标和注册商标均属其各自所有人的财产，特此声明。

**免责声明**

翱捷科技股份有限公司对本文档内容不做任何形式的保证，并会对本文档内容或本文中介绍的产品进行不定期更新。

本文档仅作为使用指导，本文的所有内容不构成任何形式的担保。本文档中的信息如有变更，恕不另行通知。

本文档不负任何责任，包括使用本文档中的信息所产生的侵犯任何专有权行为的责任。

**防静电警告**

静电放电（ESD）可能会损坏本产品。使用本产品进行操作时，须小心进行静电防护，避免静电损坏产品。

**翱捷科技股份有限公司**

地址：上海市浦东新区科苑路399号张江创新园10号楼9楼 邮编：201203

官网： http://www.asrmicro.com/

**文档修订历史**

======= ====== ==========
日期    版本号 发布说明
======= ====== ==========
2022.12 V1.1.0 更新插图。
======= ====== ==========

1. 硬件描述
-----------

-  **UART0**\ ：

   - 功能：DTM Interface

   - 流控：硬件流控（RTS/CTS）

   - 管脚：P2~P5

   -  P2 – UART0 TX
   -  P3 – UART0 RX
   -  P4 – UART0 CTS
   -  P5 – UART0 RTS

-  **UART1**\ ：

   - 功能：程序烧录/AT Command/LOG输出

   - 管脚：

   -  P4 – UART1 TX
   -  P5 – UART1 RX

ASR560X 系列芯片默认的程序烧录口为 UART1，对应的芯片引脚为 P4 和 P5。ASR560X 系列芯片有 QFN32 和 QFN48 两种封装，对应有两种开发板。使用不同的开发板进行固件烧录时，跳线设置会有差异，下文将对这两种开发板进行详细的介绍。

1.1 ASR560X 32-PIN 开发板串口硬件说明
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

【图1-1】

1.2 ASR560X 48-PIN 开发板串口硬件说明
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

【图1-2】

2. 程序烧录
-----------

2.1 32-PIN 开发板硬件设置
~~~~~~~~~~~~~~~~~~~~~~~~

下图中框出的五部分为：

-  Part 1：4 个跳线帽（J12，J11，JP11 和 JP14），用于配置 miniUSB 的数据通道为 UART1。
-  Part 2：SELx (x=0, 1) 跳线帽，用于配置下载或运行模式。
-  Part 3：柱状天线。
-  Part 4：电源+通讯串口。
-  Part 5：RESET（复位）按键。

按如下步骤进行配置，使 32-PIN 开发板进入程序下载模式，最终跳线情况如下图所示：

1. 通过 USB 线使 Part 4 的 miniUSB 口与 PC 连接，若供电正常且供电开关打开，则指示红灯亮；
2. 设置 Part 1 的跳线帽，使开发板的 miniUSB 与 ASR560X 芯片的 UART1 连接，从而将开发板配置为使用 UART1 的烧录模式；
3. 通过 Part 2 的跳线帽，使靠近丝印 J6 的 2 个引脚短接（即 MODE_SEL1=0，MODE_SEL0=1），ASR560X 芯片的启动模式为下载模式；
4. 最后，接上 Part 3 的棒状天线，按下 Part 5 的复位按键，进入程序下载模式。

【图2-1】

.. _pin开发板硬件设置-1:

2.2 48-PIN 开发板硬件设置
~~~~~~~~~~~~~~~~~~~~~~~~

下图中框出的 5 部分为：

-  Part 1：4 个跳线帽（J12，J11，JP11和JP14），用于配置 miniUSB 的数据通道为 UART1。
-  Part 2：SELx (x=0, 1) 跳线帽，用于配置下载或运行模式。
-  Part 3：柱状天线。
-  Part 4：电源+通讯串口。
-  Part 5：RESET（复位）按键。

按如下步骤进行配置，使 48-PIN 开发板进入程序下载模式，最终跳线情况如下图所示：

1. 通过 USB 线使 Part 4 的 miniUSB 口与 PC 连接，若供电正常且供电开关打开，则指示红灯亮；

2. 设置 Part 1 的跳线帽，使开发板的 miniUSB 与 ASR560X 芯片的 UART1 连接，从而将开发板配置为使用 UART1 的烧录模式；

3. 通过 Part 2 的跳线帽，使靠近丝印 J6 的 2 个引脚短接（即MODE_SEL1=0，MODE_SEL0=1），ASR560X 芯片的启动模式为下载模式；

4. 最后，接上 Part 3 的棒状天线，按下 Part 5 的复位按键，进入程序下载模式。

   【图2-2】

2.3 烧录工具选择串口
~~~~~~~~~~~~~~~~~~~~

开发板使用 DOGO 工具进行程序烧录。当开发板连接到 PC 后，按如下步骤进行操作。

**Step 1**\ ：点击此按钮来检测串口。

**Step 2**\ ：点击并在下拉选框中选择开发板对应串口。

**Step 3**\ ：点击并在下拉选框中选择芯片类型为 560X（默认值为 550X）。

**Step 4**\ ：点击此按钮以打开串口（串口波特率等参数如下图所示）。

【图2-3】

**Step 5**\ ：硬件连接和软件配置完成后，按下开发板上的\*\ **RESET\***\ 物理按键，DOGO 烧录工具会打印字符串 “1F2E3D00”，表示芯片正确配置为烧录模式且已做好烧录的准备。

【图2-4】

2.4 烧录固件
~~~~~~~~~~~~

开始烧录前需要设置好待烧录固件的路径，ASR560X 系列芯片需要烧录的固件共有 3 个，其中 2 个（bootload+rom）由 SDK 提供，而 app 则需要用户根据应用自行编译生成。

**注意：如果已完成烧录 bootload 和 ROM，仅更新 app 固件，则只需配置好 app 固件路径，勾选“only image”，然后执行烧录即可。**

具体操作流程如下：

**Step 1**\ ：点击\ **路径设置**\ 按钮以弹出选择烧录固件的窗口。

**Step 2**\ ：从电脑文件系统中选择需加载的三个固件，其中：

1. **bootload**\ 固件路径为\ *SDK* *tools/bootloader/*.bin*\ 。此文件夹下为通用的 bootload 固件，特殊功能的 bootload 固件可从原厂获取。
2. **rom**\ 固件路径为\ *SDK* *symbol/sonata/*.bin*\ 。\ **app**\ 固件会根据 RAM 资源消耗情况配置不同的 ROM，烧录时需选择\ **app**\ 配置使用的\ **rom**\ 固件。
3. 对于用户程序（\ **app**\ ）固件，则需从\ *build/out*\ 对应目录中选择用户编译生成的 bin 文件。

**注意：新版本工具支持烧录 ATE 固件，默认不需要选择。**

**Step 3**\ ：选择完毕后，点击 **确认** 按钮。

**Step 4**\ ：开始同时烧录三个固件。

【图2-5】

2.5 烧录完成
~~~~~~~~~~~~

因为选择了三个要烧录的固件，所以需要看到 DOGO 打印三次 “burn ok”，才表示烧录成功。

【图2-6】

3. 程序运行
-----------

请按如下步骤来运行程序：

**Step1**\ ：如下图所示，设置 SEL0 的跳线，使 J6 的 2、3 引脚跳接，将开发板配置成 Flash 启动模式（MODE_SEL1 = 0，MODE_SEL0=0）。

【图3-1】

【图3-2】

**Step2**\ ：按下开发板上的\*\ **RESET\***\ 物理按键，程序将运行。串口工具会在串口数据接收区先后输出 bootloader 进入跳转到 app 的日志和已烧录应用程序的日志（如下图）。

如串口仍打印“1F2E3D00”，则需要检查跳线帽的设置是否正确。

【图3-3】



.. |image1| image:: ../../img/560X_开发板用户指南/图1-1.png
.. |image2| image:: ../../img/560X_开发板用户指南/图1-2.png
.. |image3| image:: ../../img/560X_开发板用户指南/图2-1.png
.. |image4| image:: ../../img/560X_开发板用户指南/图2-2.png
.. |image5| image:: ../../img/560X_开发板用户指南/图2-3.png
.. |image6| image:: ../../img/560X_开发板用户指南/图2-4.png
.. |image7| image:: ../../img/560X_开发板用户指南/图2-5.png
.. |image8| image:: ../../img/560X_开发板用户指南/图2-6.png
.. |image9| image:: ../../img/560X_开发板用户指南/图3-1.png
.. |image10| image:: ../../img/560X_开发板用户指南/图3-2.png
.. |image11| image:: ../../img/560X_开发板用户指南/图3-3.png