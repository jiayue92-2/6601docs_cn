ASR560X 系列 BLE Mesh AT命令说明
================================

前言
----

**关于本文档**

本文档主要介绍用于测试 ASR560X 系列开发板的 BLE Mesh AT 命令说明。

**读者对象**

本文档主要适用于以下工程师：

-  单板硬件开发工程师
-  软件工程师
-  技术支持工程师

**产品型号**

本文档适用于 ASR560X 系列蓝牙芯片。

+---------+-------------------------------------------------------------------------------------------+----------+--------------+------------------------------------------------------------------------------------+
| Model   | Protocol                                                                                  | Core     | SiP Flash    | Function                                                                           |
+=========+===========================================================================================+==========+==============+====================================================================================+
| ASR560X | BLE 5.1 full feature (compatible with 5.2) SIG MESH V1.0.x IEEE 802.15.4 2.4G Proprietary | ARM CM0+ | 1 MB/ 512 KB | AOA/AOD/Voice/IRTxRx/ Quadrature Decoder/Keypad/ 5V UART/5V GPIO/ Wi-Fi concurrent |
+---------+-------------------------------------------------------------------------------------------+----------+--------------+------------------------------------------------------------------------------------+

**版权公告**

版权归 © 2022 翱捷科技股份有限公司所有。保留一切权利。未经翱捷科技股份有限公司的书面许可，不得以任何形式或手段复制、传播、转录、存储或翻译本文档的部分或所有内容。

**商标声明**

ASR、翱捷和其他翱捷商标均为翱捷科技股份有限公司的商标。

本文档提及的其他所有商标名称、商标和注册商标均属其各自所有人的财产，特此声明。

**免责声明**

翱捷科技股份有限公司对本文档内容不做任何形式的保证，并会对本文档内容或本文中介绍的产品进行不定期更新。

本文档仅作为使用指导，本文的所有内容不构成任何形式的担保。本文档中的信息如有变更，恕不另行通知。

本文档不负任何责任，包括使用本文档中的信息所产生的侵犯任何专有权行为的责任。

**防静电警告**

静电放电（ESD）可能会损坏本产品。使用本产品进行操作时，须小心进行静电防护，避免静电损坏产品。

**翱捷科技股份有限公司**

地址：上海市浦东新区科苑路399号张江创新园10号楼9楼 邮编：201203

官网： http://www.asrmicro.com/

**文档修订历史**

======= ====== ==========
日期    版本号 发布说明
======= ====== ==========
2022.12 V1.0.0 首次发布。
======= ====== ==========

1. AT命令
---------

1.1 set_network_param
~~~~~~~~~~~~~~~~~~~~~

+--------------+------------------------------------------------------------------------------------------------------------+
| **命令**     | set_network_param <count> <interval>                                                                       |
+==============+============================================================================================================+
| **响应**     | ack                                                                                                        |
+--------------+------------------------------------------------------------------------------------------------------------+
| **功能**     | 设置Mesh Network Transmit。                                                                                |
+--------------+------------------------------------------------------------------------------------------------------------+
| **参数说明** | count：Network PDU发送次数 取值范围1≤count≤8；interval：Network PDU发送间隔 单位：10 ms 取值范围1≤count≤32 |
+--------------+------------------------------------------------------------------------------------------------------------+
| **示例**     | 设置Network PDU发送次数为3，发送间隔为30 ms：set_network_param 3 3                                         |
+--------------+------------------------------------------------------------------------------------------------------------+
| **注意**     | 安卓手机在配网时会设置该参数，可在配网成功后再设置该参数。                                                 |
+--------------+------------------------------------------------------------------------------------------------------------+

1.2 set_relay_param
~~~~~~~~~~~~~~~~~~~

+--------------+----------------------------------------------------------------------------------------------------------------------------------------------------------+
| **命令**     | set_relay_param <state> <count> <interval>                                                                                                               |
+==============+==========================================================================================================================================================+
| **响应**     | ack                                                                                                                                                      |
+--------------+----------------------------------------------------------------------------------------------------------------------------------------------------------+
| **功能**     | 设置Mesh Relay Retransmit。                                                                                                                              |
+--------------+----------------------------------------------------------------------------------------------------------------------------------------------------------+
| **参数说明** | state：1：开启relay 0：关闭relay；count：Network PDU Relay发送次数 取值范围1≤count≤8；interval：Network PDU Relay发送间隔 单位：10 ms 取值范围1≤count≤32 |
+--------------+----------------------------------------------------------------------------------------------------------------------------------------------------------+
| **示例**     | 打开relay，设置Network PDU relay发送次数为1，发送间隔为30 ms：set_relay_param 1 1 3                                                                      |
+--------------+----------------------------------------------------------------------------------------------------------------------------------------------------------+
| **注意**     | 无                                                                                                                                                       |
+--------------+----------------------------------------------------------------------------------------------------------------------------------------------------------+

1.3 send_unicast_pkt
~~~~~~~~~~~~~~~~~~~~

+--------------+---------------------------------------------------------------------------------------------------------------------------------------------------------+
| **命令**     | send_unicast_pkt <model_option> <dst><ttl><onoff>                                                                                                       |
+==============+=========================================================================================================================================================+
| **响应**     | ack                                                                                                                                                     |
+--------------+---------------------------------------------------------------------------------------------------------------------------------------------------------+
| **功能**     | 发送单播消息。                                                                                                                                          |
+--------------+---------------------------------------------------------------------------------------------------------------------------------------------------------+
| **参数说明** | model_option：1：Vendor model 0：Generic OnOff Client model；dst：目标设备单播地址；ttl：Network PDU TTL 取值范围0≤ttl≤127；onoff：开关状态 1：开 0：关 |
+--------------+---------------------------------------------------------------------------------------------------------------------------------------------------------+
| **示例**     | 本地 model 为 Generic OnOff Client model，向目标设备地址为 10 的设备发送开灯单播消息，ttl为10：send_unicast_pkt 0 10 10 1                               |
+--------------+---------------------------------------------------------------------------------------------------------------------------------------------------------+
| **注意**     | 无                                                                                                                                                      |
+--------------+---------------------------------------------------------------------------------------------------------------------------------------------------------+

1.4 send_group_pkt
~~~~~~~~~~~~~~~~~~

+--------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------+
| **命令**     | send_group_pkt <model_option> <dst><ttl><onoff>                                                                                                             |
+==============+=============================================================================================================================================================+
| **响应**     | ack                                                                                                                                                         |
+--------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------+
| **功能**     | 发送组播消息                                                                                                                                                |
+--------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------+
| **参数说明** | model_option：1：Vendor model 0：Generic OnOff Client model；dst：目标设备订阅的组地址；ttl：Network PDU TTL 取值范围0≤ttl≤127；onoff：开关状态 1：开 0：关 |
+--------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------+
| **示例**     | 本地 model 为 Generic OnOff Client model，向订阅组播地址 0xC000 的设备发送开灯组播消息，ttl 为 10： send_group_pkt 0 0xC000 10 1                            |
+--------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------+
| **注意**     | 无                                                                                                                                                          |
+--------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------+

