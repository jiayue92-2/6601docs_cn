ASR560X 系列 SDK 固件类型和烧录说明
==================================

前言
----

**关于本文档**

本文档主要介绍 ASR560X 系列蓝牙芯片 SDK 提供/生成固件的类型以及运行 demo 需要烧录的固件。

**读者对象**

本文档主要适用于以下工程师：

-  单板硬件开发工程师
-  软件工程师
-  技术支持工程师

**产品型号**

本文旨在介绍用于 ASR560X 系列 BLE 芯片开发的 DOGO 工具的配置与使用。

+---------+----------------------------------------------------------------------------------------+----------+--------------+------------------------------------------------------------------------------------+
| 型号    | 协议                                                                                   | 内核     | SiP Flash    | 功能                                                                               |
+=========+========================================================================================+==========+==============+====================================================================================+
| ASR560X | BLE 5.1 full feature (compatible with 5.2) BLE SIG Mesh IEEE 802.15.4 2.4G Proprietary | ARM CM0+ | 1 MB/ 512 KB | AOA/AOD/Voice/IRTxRx/ Quadrature Decoder/Keypad/ 5V UART/5V GPIO/ Wi-Fi concurrent |
+---------+----------------------------------------------------------------------------------------+----------+--------------+------------------------------------------------------------------------------------+

**版权公告**

版权归 © 2023 翱捷科技股份有限公司所有。保留一切权利。未经翱捷科技股份有限公司的书面许可，不得以任何形式或手段复制、传播、转录、存储或翻译本文档的部分或所有内容。

**商标声明**

ASR、翱捷和其他翱捷商标均为翱捷科技股份有限公司的商标。

本文档提及的其他所有商标名称、商标和注册商标均属其各自所有人的财产，特此声明。

**免责声明**

翱捷科技股份有限公司对本文档内容不做任何形式的保证，并会对本文档内容或本文中介绍的产品进行不定期更新。

本文档仅作为使用指导，本文的所有内容不构成任何形式的担保。本文档中的信息如有变更，恕不另行通知。

本文档不负任何责任，包括使用本文档中的信息所产生的侵犯任何专有权行为的责任。

**防静电警告**

静电放电（ESD）可能会损坏本产品。使用本产品进行操作时，须小心进行静电防护，避免静电损坏产品。

**翱捷科技股份有限公司**

地址：上海市浦东新区科苑路399号张江创新园10号楼9楼 邮编：201203

官网： http://www.asrmicro.com/

**文档修订历史**

======= ====== ==========
日期    版本号 发布说明
======= ====== ==========
2023.02 V1.0.0 首次发布。
======= ====== ==========

1. 固件类型
-----------

1.1 Bootloader 固件
~~~~~~~~~~~~~~~~~~

引导程序，支持 OTA 相关功能。Bootloader固件执行完成后，将跳转至固定地址，运行对应的 app 固件。

此固件默认放在 SDK tools/bootloader 目录下，并使用 UART1（P04/P05）作为通讯口。

1.2 ROM 固件
~~~~~~~~~~~

BLE 协议栈固件默认放在 SDK symbol/sonata 目录下，BLE demo 必须烧录 ROM 固件才能正常运行。用户可以根据应用资源的消耗情况配置不同的协议栈固件，具体请参考《ASR560X 系列_内存布局配置应用手册》文档。

1.3 APP固件
~~~~~~~~~~~

开发者基于 SDK 平台开发生成的应用程序 bin 文件。

1.4 OTA 固件
~~~~~~~~~~~

OTA 升级固件，通过 image_gen_header 工具配置生成，默认以“_OTA.bin”字符串结尾。工具的具体使用说明请参考《ASR560X 系列_开发入门指南》文档 OTA 章节。

1.5 ATE 固件
~~~~~~~~~~~

RF 测试/校准固件，使用 UART1（P04/P05）作为通讯口，需要配合相关仪器使用，可用于 CE/FCC/SRRC 等认证测试。此固件默认没有放在 SDK 中，如有相关测试需求，可与代理商或 ASR 联系。

2. 固件烧录
-----------

以下将以外设工程和 BLE 工程举例说明运行 APP 需要烧录哪些固件，具体固件烧录步骤请参考《ASR560X_BLE 编程工具用户手册》。

2.1 外设工程烧录说明
~~~~~~~~~~~~~~~~~~~~

外设工程只需要烧录 Bootloader 和 APP 固件即可正常运行。

2.2 BLE 工程烧录说明
~~~~~~~~~~~~~~~~~~~

BLE 工程相比外设工程，在烧录 Bootloader 和 APP 固件的基础上，需要额外烧录 BLE 协议栈固件。

因各个 APP 使用的 BLE 协议栈固件有差异，用户需要根据对应 APP config.mk 脚本（路径为 SDK/build/build_rules/project/sonata_hl_****_demo/）的 LINKER_MISC_ROM_ELF_PATH 值判断，具体判断标准如下表：

+--------------------------------------------------+-------------------------------------------+
| **LINKER_MISC_ROM_ELF_PATH值**                   | **需要烧录的ROM固件**                     |
+==================================================+===========================================+
| sonata_hl_ll_rom_symbol.txt                      | sonata_hl_ll_rom.bin                      |
+--------------------------------------------------+-------------------------------------------+
| sonata_hl_ll_rom_l_symbol.txt                    | sonata_hl_ll_rom_l.bin                    |
+--------------------------------------------------+-------------------------------------------+
| sonata_hl_ll_rom_l2_symbol.txt                   | sonata_hl_ll_rom_l2.bin                   |
+--------------------------------------------------+-------------------------------------------+
| sonata_hl_ll_rom_m_cutdown_symbol.txt            | sonata_hl_ll_rom_m_cutdown.bin            |
+--------------------------------------------------+-------------------------------------------+
| sonata_dyna_hl_ll_peripheral_only_rom_symbol.txt | sonata_dyna_hl_ll_peripheral_only_rom.bin |
+--------------------------------------------------+-------------------------------------------+
| sonata_dyna_hl_ll_rom_symbol.txt                 | sonata_dyna_hl_ll_rom.bin                 |
+--------------------------------------------------+-------------------------------------------+

以 SDK V1.7.1 举例说明，SDK 默认的 BLE demo 使用的 ROM 固件如下表：

+--------------------------------------------------+-------------------------------------------+
| **Demo**                                         | **需要烧录的ROM固件**                     |
+==================================================+===========================================+
| sonata_dyna_hl_ll_app_rel                        | sonata_dyna_hl_ll_rom.bin                 |
+--------------------------------------------------+-------------------------------------------+
| sonata_dyna_hl_ll_peripheral_only_app_rel        | sonata_dyna_hl_ll_peripheral_only_rom.bin |
+--------------------------------------------------+-------------------------------------------+
| sonata_hl_beacon_rel                             | sonata_hl_ll_rom.bin                      |
+--------------------------------------------------+-------------------------------------------+
| sonata_hl_central_rel                            | sonata_hl_ll_rom.bin                      |
+--------------------------------------------------+-------------------------------------------+
| sonata_hl_data_trans_low_power_rel               | sonata_hl_ll_rom_m_cutdown.bin            |
+--------------------------------------------------+-------------------------------------------+
| sonata_hl_data_trans_rel                         | sonata_hl_ll_rom.bin                      |
+--------------------------------------------------+-------------------------------------------+
| sonata_hl_hid_dongle_rel                         | sonata_hl_ll_rom.bin                      |
+--------------------------------------------------+-------------------------------------------+
| sonata_hl_hid_general_mouse_rel                  | sonata_hl_ll_rom_l2.bin                   |
+--------------------------------------------------+-------------------------------------------+
| sonata_hl_multiconn_rel                          | sonata_hl_ll_rom_l2.bin                   |
+--------------------------------------------------+-------------------------------------------+
| sonata_hl_peripheral_rel                         | sonata_hl_ll_rom_m_cutdown.bin            |
+--------------------------------------------------+-------------------------------------------+
| sonata_mesh_friend_rel                           | sonata_hl_ll_rom.bin                      |
+--------------------------------------------------+-------------------------------------------+
| sonata_mesh_generic_client_rel                   | sonata_hl_ll_rom.bin                      |
+--------------------------------------------------+-------------------------------------------+
| sonata_mesh_generic_onoff_server_tmall_rel       | sonata_hl_ll_rom.bin                      |
+--------------------------------------------------+-------------------------------------------+
| sonata_mesh_generic_server_rel                   | sonata_hl_ll_rom.bin                      |
+--------------------------------------------------+-------------------------------------------+
| sonata_mesh_low_power_rel                        | sonata_hl_ll_rom.bin                      |
+--------------------------------------------------+-------------------------------------------+
| sonata_mesh_provisioner_generic_onoff_client_rel | sonata_hl_ll_rom.bin                      |
+--------------------------------------------------+-------------------------------------------+
| sonata_ota_rel                                   | sonata_hl_ll_rom.bin                      |
+--------------------------------------------------+-------------------------------------------+

.. attention::
    上表的内容仅供参考，请以 demo 对应 config.mk 配置使用的 ROM 为准。
