ASR560X 系列 BLE 编程工具用户手册
================================
`English <https://asriot.readthedocs.io/en/latest/ASR560X/Download-Tool/560X_Programming.html>`_


前言
----

**关于本文档**

本文档主要介绍 ASR560X 如何通过 CWM500 蓝牙综测仪进行信令测试，进而完成 BQB 相关测试项目。BQB 认证测试项目分为射频部分和协议部分，本文主要介绍射频部分的测试。

**读者对象**

本文档主要适用于以下工程师：

-  单板硬件开发工程师
-  软件工程师
-  技术支持工程师

**产品型号**

本文旨在介绍用于 ASR560X 系列 BLE 芯片开发的 DOGO 工具的配置与使用。

+---------+-------------------------------------------------------------------------------------------+----------+--------------+------------------------------------------------------------------------------------+
| 型号    | 协议                                                                                      | 内核     | SiP Flash    | 功能                                                                               |
+=========+===========================================================================================+==========+==============+====================================================================================+
| ASR560X | BLE 5.1 full feature (compatible with 5.2) SIG MESH V1.0.x IEEE 802.15.4 2.4G Proprietary | ARM CM0+ | 1 MB/ 512 KB | AOA/AOD/Voice/IRTxRx/ Quadrature Decoder/Keypad/ 5V UART/5V GPIO/ Wi-Fi concurrent |
+---------+-------------------------------------------------------------------------------------------+----------+--------------+------------------------------------------------------------------------------------+

**版权公告**

版权归 © 2023 翱捷科技股份有限公司所有。保留一切权利。未经翱捷科技股份有限公司的书面许可，不得以任何形式或手段复制、传播、转录、存储或翻译本文档的部分或所有内容。

**商标声明**

ASR、翱捷和其他翱捷商标均为翱捷科技股份有限公司的商标。

本文档提及的其他所有商标名称、商标和注册商标均属其各自所有人的财产，特此声明。

**免责声明**

翱捷科技股份有限公司对本文档内容不做任何形式的保证，并会对本文档内容或本文中介绍的产品进行不定期更新。

本文档仅作为使用指导，本文的所有内容不构成任何形式的担保。本文档中的信息如有变更，恕不另行通知。

本文档不负任何责任，包括使用本文档中的信息所产生的侵犯任何专有权行为的责任。

**防静电警告**

静电放电（ESD）可能会损坏本产品。使用本产品进行操作时，须小心进行静电防护，避免静电损坏产品。

**翱捷科技股份有限公司**

地址：上海市浦东新区科苑路 399 号张江创新园 10 号楼 9 楼 邮编：201203

官网： http://www.asrmicro.com/

**文档修订历史**

+---------+--------+----------------------------------------------------------------------------------------+
| 日期    | 版本号 | 发布说明                                                                               |
+=========+========+========================================================================================+
| 2020.12 | V1.1.2 | 更新路径选择部分的描述；增加一键烧录的描述；更新\ `2.2 <#_程序烧录>`__\ 节：程序烧录。 |
+---------+--------+----------------------------------------------------------------------------------------+

1. 概述
-------

本文旨在介绍用于 ASR5601 BLE 芯片开发的 DOGO 工具的配置与使用。

下图为烧录调试工具 DOGO 的界面示例。

|image1|

DOGO 支持串口调试和程序下载功能：

1. **串口调试功能**\ ：支持串口 AT 命令的交互，支持 Hex 显示和导出 log 到文件，支持多个 AT 命令批量发送功能。

2. **程序烧录功能**\ ：支持一键烧录所选的多个固件。

3. **高速下载功能**\ ：支持烧录固件高速模式，勾选“high”选项，下载固件速率提升到 921600 bps。

2. 使用说明
-----------

2.1 基本功能
~~~~~~~~~~~~

1. 串口连接 PC 和 ASR5601 开发板，点击 “检测串口” 按键，在串口选择一栏选择对应的端口号。

2. 根据对应的串口状态进行相应的设置，设置完成后点击 “打开串口”。

3. 串口命令发送区默认在发送的 ASCII 码后追加回车换行 \*\*:raw-latex:`\r\n*`\*，无需手动添加，同时支持定时发送和 hex 发送。

4. 支持时间戳捕获功能，勾选“时间戳”选项，所捕捉 log 的前缀会添加上时间戳。

2.2 程序烧录
~~~~~~~~~~~~

2.2.1 Bootloader 烧录
^^^^^^^^^^^^^^^^^^^^

1. **步骤1**\ ：选择跳帽（如图中设置烧录模式的跳帽和 P4/P5 跳线帽），将 ASR5601 开发板配置为 UART 烧录模式：MODEL_SEL1 = 0，MODEL_SEL0 = 1；烧录串口为P04/P05。

|image2|

​ 配置完成后，接通电源和开关，打开电源开关，指示红灯亮。

2. **步骤2**\ ：串口连接 PC 和 ASR5601 开发板，点击 “检测串口” 按键，在串口选择一栏选择对应的端口号并进行串口配置（波特率 115200 bps，8位数据位，无奇偶校验位，1位停止位)，设置完成后点击 “打开串口”；\ **选择 “ChipType 类型为 5601**\ 。

3. **步骤3**\ ：点击 “路径设置”，待弹出小窗口后点击 BOOTLOAD 对应的 “browser” ，进入目录，选择待烧录的 Bootloader 文件。选择完毕后，点击 “确认” 关闭小窗口，然后勾选 “only bootloader”，同时可勾选“high”选项，提升下载速率。

|image3|

4. **步骤4**\ ：按下开发板上的复位键，出现 “1F2E3D00” 后，点击 “烧录” 。进度条达到 100% 时，即表示 bin 文件烧录完成。

|image4|

2.2.2 BLE ROM 烧录
^^^^^^^^^^^^^^^^^

**步骤1**\ ，\ **2**\ ，\ **4**\ 同 Bootloader 烧录。

**步骤3**\ ：点击 “路径设置”，待弹出小窗口后点击 ROM 对应的 “browser”，进入目录，选择待烧录的 ROM 文件。选择完毕后，点击 “Save” 关闭小窗口，然后勾选“only rom”，同时可勾选“high“选项，提升下载速率。

|image5|

2.2.3 APP 烧录
^^^^^^^^^^^^^

**步骤1**\ ，\ **2**\ ，\ **4**\ 同 Bootloader 烧录。

**步骤3**\ ：点击 “路径设置”，待弹出小窗口后点击 APP 对应的 “browser”，进入目录，选择待烧录的 APP 文件。点击 “Save” 关闭小窗口，勾选 “only image”，同时可勾选“high”选项，提升下载速率。

|image6|

2.2.4 ATE 烧录
^^^^^^^^^^^^^

**步骤1，2，4**\ 同 Bootloader 烧录。

**步骤3**\ ：点击 “路径设置”，待弹出小窗口后点击 ATE 对应的 “browser”，进入目录，选择待烧录的 ATE 文件。点击 “Save” 关闭小窗口，勾选 “only ate”，同时可勾选“high”选项，提升下载速率。

.. attention::
    ATE固件主要用于设备产测，不烧录亦不影响app程序运行。

|image7|

2.2.5 一键烧录四个固件
^^^^^^^^^^^^^^^^^^^^^^

**步骤1，2，4**\ 同 Bootloader 烧录。

**步骤3**\ ：点击 “路径设置”，待弹出小窗口后：

1. 点击 Bootloader 对应的 “browser”，进入目录，选择待烧录的 Bootloader 文件。

2. 点击 BLE ROM 对应的 “browser”，进入目录，选择待烧录的 ROM 文件。

3. 点击 APP 对应的 “browser”，进入目录，选择待烧录的 APP 文件。

4. 点击 ATE 对应的 “browser”，进入目录，选择待烧录的 ATE 文件。

点击 “Save” 关闭小窗口，可勾选”high”选项，提升下载速率。

|image8|

2.3 程序启动
~~~~~~~~~~~~

1. 所有固件烧录完成后，将跳帽更改到正常启动模式（如下图），然后按下 Reset 按键，芯片重新启动，打印 Bootloader 的 log 信息

|image9|

2. 程序正常启动示例（如下图），Bootloader 和 APP 均正常启动。

|image10|

3. 常用功能说明
---------------

3.1 Flash 擦除
~~~~~~~~~~~~~

可以使用 DOGO工具进行 Flash 擦除。步骤参考下图说明：

|image11|

3.2 保存 log
~~~~~~~~~~~

勾选 DOGO 工具右侧“接收到文件”选项，再点击“打开串口”，工具所接收到的 log 数据都将保存至工具 recev_data 目录下。


.. attention::
    需先勾选“接收到文件”选项，再打开串口，才能正确使能保存log功能。



.. |image1| image:: ../../img/560X_编程工具/图1-1.png
.. |image2| image:: ../../img/560X_编程工具/图2-1.png
.. |image3| image:: ../../img/560X_编程工具/图2-2.png
.. |image4| image:: ../../img/560X_编程工具/图2-3.png
.. |image5| image:: ../../img/560X_编程工具/图2-4.png
.. |image6| image:: ../../img/560X_编程工具/图2-5.png
.. |image7| image:: ../../img/560X_编程工具/图2-6.png
.. |image8| image:: ../../img/560X_编程工具/图2-7.png
.. |image9| image:: ../../img/560X_编程工具/图2-8.png
.. |image10| image:: ../../img/560X_编程工具/图2-9.png
.. |image11| image:: ../../img/560X_编程工具/图3-1.png