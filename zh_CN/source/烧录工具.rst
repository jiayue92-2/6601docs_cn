ASR6601 烧录工具使用说明
========================

前言
----

**关于本文档**

本文档主要对 IoT LoRa SoC 芯片 ASR6601 的烧录工具进行说明，方便客户使用该工具进行 ASR6601 的 Flash 烧录等。

**产品型号**

与本文档相对应的产品型号如下：

+-----------+-----------+----------+-----------------------------+---------------+---------------+
| **型号**  | **Flash** | **SRAM** | **内核**                    | **封装**      | **频率**      |
+===========+===========+==========+=============================+===============+===============+
| ASR6601SE | 256 KB    | 64 KB    | 32-bit 48 MHz ARM STAR      | QFN68, 8*8 mm | 150 ~ 960 MHz |
+-----------+-----------+----------+-----------------------------+---------------+---------------+
| ASR6601CB | 128 KB    | 16 KB    | 32-bit 48 MHz ARM STAR      | QFN48, 6*6 mm | 150 ~ 960 MHz |
+-----------+-----------+----------+-----------------------------+---------------+---------------+

**版权公告**

版权归 © 2021 翱捷科技股份有限公司所有。保留一切权利。未经翱捷科技股份有限公司的书面许可，不得以任何形式或手段复制、传播、转录、存储或翻译本文档的部分或所有内容。

**商标声明**

ASR、翱捷和其他翱捷商标均为翱捷科技股份有限公司的商标。

本文档提及的其他所有商标名称、商标和注册商标均属其各自所有人的财产，特此声明。

**免责声明**

翱捷科技股份有限公司对本文档内容不做任何形式的保证，并会对本文档内容或本文中介绍的产品进行不定期更新。

本文档仅作为使用指导，本文的所有内容不构成任何形式的担保。本文档中的信息如有变更，恕不另行通知。

本文档不负任何责任，包括使用本文档中的信息所产生的侵犯任何专有权行为的责任。

**翱捷科技股份有限公司**

地址：上海市浦东新区科苑路 399 号张江创新园 10 号楼 9 楼 邮编：201203

官网：http://www.asrmicro.com/asrweb/

**文档修订历史**

+----------+------------+--------------------------------------------------------------------------------+
| **日期** | **版本号** | **发布说明**                                                                   |
+==========+============+================================================================================+
| 2020.05  | V0.1.0     | 首次发布。                                                                     |
+----------+------------+--------------------------------------------------------------------------------+
| 2020.09  | V0.2.0     | 更新配图。                                                                     |
+----------+------------+--------------------------------------------------------------------------------+
| 2020.09  | V0.3.0     | 更新为 ASR6601SE-EVAL v2.0 的配图。                                            |
+----------+------------+--------------------------------------------------------------------------------+
| 2021.05  | V1.1.0     | 删除第 1 章的概述，将其内容合并到前言“关于本文档”部分。 删除 option 相关内容。 |
+----------+------------+--------------------------------------------------------------------------------+

\

1. 准备
-------

1.1 硬件准备
~~~~~~~~~~~~

必需硬件列表如下：

-  ASR6601 开发板 1 个

-  天线 1 根

-  USB 线 1 根

-  PC 机 1 台

1.1.1 ASR6601 开发板说明
^^^^^^^^^^^^^^^^^^^^^^^^

开发板 ASR6601SE-EVAL v2.0 的正反面如下图所示：

|image1|

.. raw:: html

   <center>

ASR6601SE-EVAL v2.0 正面

|image2|

.. raw:: html

   </center>

.. raw:: html

   <center>

ASR6601SE-EVAL v2.0 反面

.. raw:: html

   </center>

+-------------------------------+--------------------------------------------------------+
| **接口**                      | **描述**                                               |
+===============================+========================================================+
| USB-UART                      | USB 转串口                                             |
+-------------------------------+--------------------------------------------------------+
| Power Switch                  | 电源开关                                               |
+-------------------------------+--------------------------------------------------------+
| Reset                         | Reset 按钮                                             |
+-------------------------------+--------------------------------------------------------+
| SW3                           | Download 按钮，按下后，GPIO02 拉高                     |
+-------------------------------+--------------------------------------------------------+
| SW1                           | User 按钮，按下后，GPIO11 拉低                         |
+-------------------------------+--------------------------------------------------------+
| JP1                           | 电源跳线                                               |
+-------------------------------+--------------------------------------------------------+
| JP2                           | 电源跳线                                               |
+-------------------------------+--------------------------------------------------------+
| JP3                           | 电源跳线                                               |
+-------------------------------+--------------------------------------------------------+
| JP4                           | 电源跳线，可测试板子总功耗                             |
+-------------------------------+--------------------------------------------------------+
| JP5                           | UART_TX 跳线，跳线连通选择 UART0_TX，具体请参考原理图  |
+-------------------------------+--------------------------------------------------------+
| JP6（仅存在于ASR6601CB-EVAL） | UART_TX 跳线，跳线连通选择 LPUART_TX，具体请参考原理图 |
+-------------------------------+--------------------------------------------------------+
| JP7                           | UART_RX 跳线，跳线连通选择 UART0_RX，具体请参考原理图  |
+-------------------------------+--------------------------------------------------------+
| JP8                           | UART_RX 跳线，跳线连通选择 LPUART_RX，具体请参考原理图 |
+-------------------------------+--------------------------------------------------------+

1.1.2 跳线连接
^^^^^^^^^^^^^^

在进行 ASR6601 开发板测试过程中，请保证下面跳线的状态正确。

===================================== =========================================
**跳线**                                **连接状态**
===================================== =========================================
JP1                                   连通
JP2                                   连通
JP3                                   连通
JP4                                   连通
JP5                                   连通
JP6（仅存在于 ASR6601CB-EVAL）              断开
JP7                                   连通
JP8                                   断开
===================================== =========================================

1.2 软件准备
~~~~~~~~~~~~

Tremo Programmer 程序位于 ASR6601 SDK 的 tools/programmer 目录下。

2. 软件说明
-----------

2.1 主界面
~~~~~~~~~~

Tremo Programmer 程序主界面如下：

|image3|


2.2 Flash 界面说明
~~~~~~~~~~~~~~~~~~

|image4|

Flash 界面主要分为 **4** 个区域：

**1. 串口配置区域**\ ：主要用来设置通信串口和波特率等。

**2. 下载文件配置区域**\ ：主要用来配置下载文件的位置和下载地址，至少需要有 1 个文件下载到 0x08000000，以确保程序可以执行。

**3. 下载操作区域**\ ：有下载开始和擦除按钮，当需要全部擦除 Flash 时才需要点擦除按钮，其余单纯下载文件，不需要点击擦除按钮。

**4. 状态显示区域**\ ：显示下载成功或失败的状态等信息。

3. 操作说明
-----------

3.1 进入下载模式
~~~~~~~~~~~~~~~~

开始下载前，请按住 SW3 按钮，使 GPIO02 拉高，同时按 Reset 按钮重启板子，使其进入下载模式。

|image5|


3.2 Flash 烧录操作说明
~~~~~~~~~~~~~~~~~~~~~~

(1) 选择串口：

|image6|

(2) 配置下载文件：

|image7|

|image8|

(3) 点击 Start 按钮开始烧录：

|image9|

(4) 烧录完成：

|image10|

4. Q&A
------

4.1 Read response header timeout 是什么原因？
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

此问题是因为待烧录板子没有回复引起的，可以检查以下两点：

(1) 检查串口连接是否正常。

(2) 检查 MCU 是否进入下载模式，可尝试按住 SW3 按钮，同时按 Reset 按钮重启。

|image11|

.. |image1| image:: img/6601_烧录工具/图1-1.png
.. |image2| image:: img/6601_烧录工具/图1-2.png
.. |image3| image:: img/6601_烧录工具/图2-1.png
.. |image4| image:: img/6601_烧录工具/图2-2.png
.. |image5| image:: img/6601_烧录工具/图3-1.png
.. |image6| image:: img/6601_烧录工具/图3-2.png
.. |image7| image:: img/6601_烧录工具/图3-3.png
.. |image8| image:: img/6601_烧录工具/图3-4.png
.. |image9| image:: img/6601_烧录工具/图3-5.png
.. |image10| image:: img/6601_烧录工具/图3-6.png
.. |image11| image:: img/6601_烧录工具/图4-1.png
